module.exports=function(e){var o={};function t(r){if(o[r])return o[r].exports;var a=o[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var a in e)t.d(r,a,function(o){return e[o]}.bind(null,a));return r},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="/dist/",t(t.s=58)}([function(e,o){e.exports=require("mongoose")},function(e,o){e.exports=function(e){if(!e.webpackPolyfill){var o=Object.create(e);o.children||(o.children=[]),Object.defineProperty(o,"loaded",{enumerable:!0,get:function(){return o.l}}),Object.defineProperty(o,"id",{enumerable:!0,get:function(){return o.i}}),Object.defineProperty(o,"exports",{enumerable:!0}),o.webpackPolyfill=1}return o}},function(e,o,t){"use strict";(function(e){var t;(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const r=e=>{let o;try{let t=e.message.substring(e.message.lastIndexOf(".$")+2,e.message.lastIndexOf("_1"));o=t.charAt(0).toUpperCase()+t.slice(1)+" already exists"}catch(e){o="Unique field already exists"}return o},a=e=>{let o="";if(e.code)switch(e.code){case 11e3:case 11001:o=r(e);break;default:o="Something went wrong"}else for(let t in e.errors)e.errors[t].message&&(o=e.errors[t].message);return o},s={getErrorMessage:a};var d,n;o.a=s,(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(d.register(r,"getUniqueErrorMessage","/Users/peterdomokos/projects/demo1/server/helpers/dbErrorHandler.js"),d.register(a,"getErrorMessage","/Users/peterdomokos/projects/demo1/server/helpers/dbErrorHandler.js"),d.register(s,"default","/Users/peterdomokos/projects/demo1/server/helpers/dbErrorHandler.js")),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&n(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(6),s=t(47),d=t.n(s),n=t(48),l=t.n(n),i=t(7);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const c=async(e,o)=>{console.log("signin...",e.body);const t="_id name media contracts profiles aims goals links measures settings created",r={path:"administeredGroups",select:"_id name desc photo groupType created datasets",populate:{path:"datasets",select:"_id name desc"}},s={path:"groupsMemberOf",select:"_id name desc photo groupType created datasets",populate:{path:"datasets",select:"_id name desc"}},n={path:"administeredDatasets",select:"_id name desc created admin measures",populate:{path:"admin",select:"_id username"}},l={path:"datasetsMemberOf",select:"_id name desc notes photo admin created",populate:{path:"admin",select:"_id username"}};try{let c;if(e.body.emailOrUsername.includes("@")?(console.log("signing in by email"),c=await a.a.findOne({email:e.body.emailOrUsername}).populate("admin","_id username firstname surname created").populate("journeys",t).populate("administeredUsers","_id username firstname surname photo created").populate(r).populate(s).populate(n).populate(l)):(console.log("signing in by username"),c=await a.a.findOne({username:e.body.emailOrUsername}).populate("admin","_id username firstname surname created").populate("journeys",t).populate("administeredUsers","_id username firstname surname photo created").populate(r).populate(s).populate(n).populate(l)),!c)return console.log("not found"),o.status("401").json({error:"User not found"});if(!c.authenticate(e.body.password))return console.log("credentials dont match"),o.status("401").send({error:"Email and password don't match."});console.log("succesful sign in");const u=d.a.sign({_id:c._id},i.a.jwtSecret);return o.cookie("t",u,{expire:new Date+9999}),c.photos=c.photos.map(e=>({_id:e._id,name:e.name,added:e.added})),o.json({token:u,user:c})}catch(e){return console.log("SIGNIN ERROR-------"),o.status("401").json({error:"Could not sign in"})}},u=(e,o)=>(o.clearCookie("t"),o.status("200").json({message:"signed out"})),p=l()({secret:i.a.jwtSecret,userProperty:"auth"}),f=(e,o,t)=>{const r=e.user&&e.auth&&(e.user._id==e.auth._id||e.user.admin.includes(e.auth._id)||e.user.admin.map(e=>e._id).includes(e.auth._id)||e.auth.isSystemAdmin);if(console.log("authorized???????? ",r),!r)return o.status("403").json({error:"User is not authorized"});t()},m={signin:c,signout:u,requireSignin:p,hasAuthorization:f};var g,y;o.a=m,(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(g.register(c,"signin","/Users/peterdomokos/projects/demo1/server/controllers/auth.controller.js"),g.register(u,"signout","/Users/peterdomokos/projects/demo1/server/controllers/auth.controller.js"),g.register(p,"requireSignin","/Users/peterdomokos/projects/demo1/server/controllers/auth.controller.js"),g.register(f,"hasAuthorization","/Users/peterdomokos/projects/demo1/server/controllers/auth.controller.js"),g.register(m,"default","/Users/peterdomokos/projects/demo1/server/controllers/auth.controller.js")),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&y(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(6),s=(t(20),t(16),t(10)),d=t.n(s),n=t(2),l=t(12),i=t.n(l),c=t(22),u=t.n(c),p=t(46);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const f={path:"administeredDatasets",select:"_id name desc created admin measures",populate:{path:"admin",select:"_id username"}},m={path:"datasetsMemberOf",select:"_id name desc notes photo admin created",populate:{path:"admin",select:"_id username"}},g=async(e,o)=>{const t=new a.a(e.body);console.log("created",t);try{return console.log("trying"),await t.save(),console.log("success"),o.status(200).json({mesg:"Successfully signed up!",user:t})}catch(e){return console.log("failure",e),o.status(400).json({error:n.a.getErrorMessage(e)})}},y=async(e,o,t,r)=>{try{let s=await a.a.findById(r).populate("admin","_id username firstname surname created").populate("journeys","_id name media contracts profiles aims goals links measures settings created").populate("administeredUsers","_id username firstname surname photo created").populate({path:"administeredGroups",select:"_id name desc photo groupType created datasets",populate:{path:"datasets",select:"_id name desc"}}).populate({path:"groupsMemberOf",select:"_id name desc photo groupType created datasets",populate:{path:"datasets",select:"_id name desc"}}).populate(f).populate(m);if(!s)return o.status("400").json({error:"User not found"});e.user=s,t()}catch(e){return o.status("400").json({error:"Could not retrieve user"})}},b=async(e,o,t,r)=>{e.photoId=r,t()},v=(e,o)=>(e.user.hashed_password=void 0,e.user.salt=void 0,e.user.photos=e.user.photos.map(e=>({_id:e._id,name:e.name,added:e.added})),o.json(e.user)),h=async(e,o)=>{try{let e=await a.a.find().select("username firstname surname photo email updated created admin").populate("admin","_id username firstname surname created");o.json(e)}catch(e){return console.log("error listing users......................."),o.status(400).json({error:n.a.getErrorMessage(e)})}},j=async(e,o)=>{console.log("createTable---------------");const{user:t,body:r}=e,a={owner:t._id,decks:[]};t.tables?t.tables=[...t.tables,a]:t.tables=[a];try{const e=await t.save();console.log("saved"),o.json(e.tables[e.tables.length-1])}catch(e){return o.status(400).json({error:n.a.getErrorMessage(e)})}},G=async(e,o)=>{console.log("createDeck---------------");const{user:t,body:{deck:r,tableId:a}}=e;t.decks?t.decks=[...t.decks,r]:t.decks=[r];try{const e=await t.save(),r=e.decks[e.decks.length-1]._id;console.log("newDeckId",r),t.tables.forEach(e=>{if(e._id.equals(a)){const o=[...e.decks,r];e.decks=o}});await t.save();o.json(e.decks[e.decks.length-1])}catch(e){return o.status(400).json({error:n.a.getErrorMessage(e)})}},H=async(e,o)=>{console.log("updateTable for.................",e.user._id);const{user:t,body:{table:r}}=e,a=Date.now();r.updated=a,t.tables=t.tables.map(e=>e._id.equals(r._id)?r:e),t.updated=a,console.log("updatedTable",r.id);try{await t.save(),console.log("saved updated table"),o.json(r)}catch(e){return o.status(400).json({error:n.a.getErrorMessage(e)})}},L=async(e,o)=>{const{user:t,body:r}=e,a=r,s=Date.now();a.updated=s,t.decks=t.decks.map(e=>e._id.equals(a._id)?a:e),t.updated=s;try{await t.save(),o.json(a)}catch(e){return o.status(400).json({error:n.a.getErrorMessage(e)})}},S=async(e,o)=>{console.log("updateDecks for.................",e.user._id);const{user:t,body:r}=e;console.log("body",r);const{desc:a,cardNr:s,itemNr:d,origSectionKey:l,prevTitle:i,title:c,section:u}=r,p=Date.now(),f=t.decks.map(e=>{if("card-title"===a){const o=JSON.parse(e.cards).map(e=>e.title!==i?e:{...e,title:c});return{...e.toObject(),cards:JSON.stringify(o),updated:p}}if("item-title"===a){const o=JSON.parse(e.cards).map(e=>{const o=e.items.map(e=>e.title!==i?e:{...e,title:c});return{...e,items:o}});return{...e.toObject(),cards:JSON.stringify(o),updated:p}}if("section"===a){const o=(e.sections?JSON.parse(e.sections):[]).map(e=>e.key!==l?e:u);return{...e.toObject(),sections:JSON.stringify(o),updated:p}}return e});t.decks=f,t.updated=p,console.log("saving user...",t.decks.length);try{await t.save(),console.log("saved"),o.json(a)}catch(e){return o.status(400).json({error:n.a.getErrorMessage(e)})}},k=async(e,o)=>{console.log("removeDeck... user deckId",e.user._id,e.body.deckId);const{user:t,body:{deckId:r,table:a}}=e,s=Date.now();a.updated=s,console.log("init nrdecks",t.decks.length),t.decks=t.decks.filter(e=>!e._id.equals(r)),t.tables=t.tables.map(e=>e._id.equals(a._id)?a:e),t.updated=s,console.log("deleted deck");try{const e=await t.save();console.log("saved...nrdecks",e.decks.length),o.json(r)}catch(e){return console.log("err!!!!",e),o.status(400).json({error:n.a.getErrorMessage(e)})}},U=async(e,o)=>{console.log("updating user....................");let t=new i.a.IncomingForm;t.keepExtensions=!0,t.parse(e,async(t,r,a)=>{if(t)return o.status(400).json({error:"Photo could not be uploaded"});r.admin&&(r.admin=JSON.parse(r.admin));let s,l=e.user;l=d()(l,r),l.updated=Date.now(),a.photo&&(s={data:u.a.readFileSync(a.photo.path),contentType:a.photo.type,name:a.photo.name,added:Date.now()},a.photo.isMain&&(l.photo=s));try{await l.save(),l.hashed_password=void 0,l.salt=void 0;let e={photos:l.photos.map(e=>({_id:e._id,name:e.name,added:e.added})),_id:l._id};o.json(e)}catch(t){return o.status(400).json({error:n.a.getErrorMessage(t)})}})},w=async(e,o)=>{console.log("remove user..............");const t=e.body.photos;try{let r=e.user;const a=t?e.user.photos.filter(e=>(e=>t.find(o=>o.equals(e.id)))(e)):[];r.photos=a,r.updated=Date.now(),await r.save(),r.hashed_password=void 0,r.salt=void 0,o.json(t)}catch(e){return o.status(400).json({error:n.a.getErrorMessage(e)})}},M=async(e,o)=>{console.log("remove user..............");try{let t=e.user,r=await t.remove();r.hashed_password=void 0,r.salt=void 0,o.json(r)}catch(e){return o.status(400).json({error:n.a.getErrorMessage(e)})}},I=(e,o,t)=>{var r;if(console.log("photo....",e.photoId),e.photoId){const t=e.user.photos.find(o=>o._id.equals(e.photoId));return t?(o.set("Content-Type",t.contentType),o.send(t.data)):o.status(400)}if(null!==(r=e.user.photo)&&void 0!==r&&r.data)return o.set("Content-Type",e.user.photo.contentType),o.send(e.user.photo.data);t()},D=(e,o,t)=>o.status(400),O=(e,o)=>o.sendFile(process.cwd()+p.a),_={create:g,userByID:y,photoByID:b,read:v,list:h,remove:M,update:U,createTable:j,updateTable:H,createDeck:G,updateDeck:L,updateDecks:S,removeDeck:k,photos:D,photo:I,defaultPhoto:O};var q,E;o.a=_,(q="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(q.register(f,"administeredDatasetsPopulationObj","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(m,"datasetsMemberOfPopulationObj","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(g,"create","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(y,"userByID","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(b,"photoByID","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(v,"read","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(h,"list","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(j,"createTable","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(G,"createDeck","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(H,"updateTable","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(L,"updateDeck","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(S,"updateDecks","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(k,"removeDeck","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(U,"update","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(w,"removePhotos","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(M,"remove","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(I,"photo","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(D,"photos","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(O,"defaultPhoto","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js"),q.register(_,"default","/Users/peterdomokos/projects/demo1/server/controllers/user.controller.js")),(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&E(e)}).call(this,t(1)(e))},function(e,o){e.exports=require("express")},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a),d=t(35),n=t.n(d),l=t(14),i=t(36),c=t(20);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const u=new s.a.Schema({username:{type:String,trim:!0,required:"Username is required"},firstname:{type:String,trim:!0,required:"First name is required"},surname:{type:String,trim:!0,required:"Surname is required"},initials:{type:String,trim:!0,required:"User initials are required"},photo:{data:Buffer,contentType:String,added:Date,name:String},photos:[{data:Buffer,contentType:String,added:Date,name:String}],dob:Date,email:{type:String,trim:!0,unique:"Email already exists",match:[/.+\@.+\..+/,"Please fill a valid email address"],required:"Email is required"},isPlayer:{type:Boolean,default:!0},isCoach:{type:Boolean,default:!0},tables:[i.a],decks:[c.a],admin:[{type:s.a.Schema.ObjectId,ref:"User"}],administeredUsers:[{type:s.a.Schema.ObjectId,ref:"User"}],administeredGroups:[{type:s.a.Schema.ObjectId,ref:"Group"}],administeredDatasets:[{type:s.a.Schema.ObjectId,ref:"Dataset"}],groupsMemberOf:[{type:s.a.Schema.ObjectId,ref:"Group"}],datasetsMemberOf:[{type:s.a.Schema.ObjectId,ref:"Dataset"}],journeys:[{type:s.a.Schema.ObjectId,ref:"Journey"}],readOnlyJourneys:[{type:s.a.Schema.ObjectId,ref:"Journey"}],homeJourney:{type:s.a.Schema.ObjectId,ref:"Journey"},manualValues:[l.a],isSystemAdmin:{type:Boolean,default:!1},hashed_password:{type:String,required:"Password is required"},salt:String,updated:Date,created:{type:Date,default:Date.now}});u.virtual("password").set((function(e){this._password=e,this.salt=this.makeSalt(),this.hashed_password=this.encryptPassword(e)})).get((function(){return this._password})),u.path("hashed_password").validate((function(e){this._password&&this._password.length<6&&this.invalidate("password","Password must be at least 6 characters."),this.isNew&&!this._password&&this.invalidate("password","Password is required")}),null),u.methods={authenticate:function(e){return this.encryptPassword(e)===this.hashed_password},encryptPassword:function(e){if(!e)return"";try{return n.a.createHmac("sha1",this.salt).update(e).digest("hex")}catch(e){return""}},makeSalt:function(){return Math.round((new Date).valueOf()*Math.random())+""}};const p=s.a.model("User",u);var f,m;o.a=p,(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(f.register(u,"UserSchema","/Users/peterdomokos/projects/demo1/server/models/user.model.js"),f.register(p,"default","/Users/peterdomokos/projects/demo1/server/models/user.model.js")),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&m(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var t;(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const r="mongodb+srv://peterdomokos:3Millbrook@switchplaycluster.l5lum.mongodb.net/switchplay_db?retryWrites=true&w=majority",a={env:"production",port:process.env.PORT||3e3,jwtSecret:process.env.JWT_SECRET||"YOUR_secret_key",mongoUri:process.env.MONGODB_URI||process.env.MONGO_HOST||r},s=a;var d,n;o.a=s,(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(d.register(r,"manualMongoUri","/Users/peterdomokos/projects/demo1/config/config.js"),d.register(a,"config","/Users/peterdomokos/projects/demo1/config/config.js"),d.register(s,"default","/Users/peterdomokos/projects/demo1/config/config.js")),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&n(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){t.d(o,"a",(function(){return n})),t.d(o,"c",(function(){return i})),t.d(o,"b",(function(){return u}));t(12),t(22),t(60);var r,a=t(2),s=t(11),d=t(6);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const n=(e,o,t)=>{d.a.findByIdAndUpdate(e,{$push:{[o]:t}},(e,t)=>{e?console.log("ERROR: add "+o+" ref to user error:",a.a.getErrorMessage(e)):console.log("SUCCESS: added "+o+" ref to user")})},l=(e,o,t)=>{s.a.findByIdAndUpdate(e,{$push:{[o]:t}},(e,t)=>{e?console.log("ERROR: add "+o+" ref to group error:",a.a.getErrorMessage(e)):console.log("SUCCESS: added "+o+" ref to group")})},i=(e,o,t)=>{d.a.findByIdAndUpdate(e,{$set:{[o]:t}},(e,t)=>{e?console.log("ERROR: set "+o+" ref in user error:",a.a.getErrorMessage(e)):console.log("SUCCESS: set "+o+" ref in user")})},c=(e,o,t)=>{s.a.findByIdAndUpdate(e,{$set:{[o]:t}},(e,t)=>{e?console.log("ERROR: set "+o+" ref in group error:",a.a.getErrorMessage(e)):console.log("SUCCESS: set "+o+" ref in group")})},u=(e,o,t)=>{d.a.findByIdAndUpdate(e,{$pull:{[o]:t}},(e,t)=>{e?console.log("ERROR: remove "+o+" ref from user error:",a.a.getErrorMessage(e)):console.log("SUCCESS: removed "+o+" ref from user")})},p=(e,o,t)=>{s.a.findByIdAndUpdate(e,{$pull:{[o]:t}},(e,t)=>{e?console.log("ERROR: remove "+o+" ref from group error:",a.a.getErrorMessage(e)):console.log("SUCCESS: removed "+o+" ref from group")})};var f,m;(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(f.register(n,"addRefToUserArray","/Users/peterdomokos/projects/demo1/server/helpers/dbQueries.js"),f.register(l,"addRefToGroupArray","/Users/peterdomokos/projects/demo1/server/helpers/dbQueries.js"),f.register(i,"setRefInUser","/Users/peterdomokos/projects/demo1/server/helpers/dbQueries.js"),f.register(c,"setRefInGroup","/Users/peterdomokos/projects/demo1/server/helpers/dbQueries.js"),f.register(u,"removeRefFromUserArray","/Users/peterdomokos/projects/demo1/server/helpers/dbQueries.js"),f.register(p,"removeRefFromGroupArray","/Users/peterdomokos/projects/demo1/server/helpers/dbQueries.js")),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&m(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){t(61);var r,a=t(15),s=(t(23),t(10)),d=t.n(s),n=t(2),l=t(12),i=t.n(l),c=t(8);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const u=async(e,o)=>{const t=new a.a(e.body);console.log("creating dset",t),t.initials||(t.initials=t.name.slice(0,5)),o.status(400);try{return await t.save(),console.log("success"),t.admin.forEach(e=>{Object(c.a)(e,"administeredDatasets",t._id)}),o.status(200).json({message:"Successfully created dataset!",dataset:t})}catch(e){return console.log("failure",e),o.status(400).json({error:n.a.getErrorMessage(e)})}},p=async(e,o,t,r)=>{console.log("readdatasetById......",r);try{let s=await a.a.findById(r).populate("admin","_id username firstname surname photo").populate("datapoints.player","_id firstname surname photo");if(!s)return o.status("400").json({error:"Dataset not found"});e.dataset=s,t()}catch(e){return o.status("400").json({error:"Could not retrieve dataset"})}},f=(e,o)=>(console.log("read dataset......"),o.json(e.dataset)),m=async(e,o)=>{console.log("read multiple full datasets......");try{const t=await a.a.find().populate("datapoints.player","_id firstname surname photo");return t.forEach(o=>{o.datapoints=o.datapoints.filter(o=>{var t;return null===(t=o.player)||void 0===t?void 0:t._id.equals(e.body.playerId)})}),o.json(t)}catch(e){return console.log("error reading multiple datasets......................."),o.status(400).json({error:n.a.getErrorMessage(e)})}},g=async(e,o)=>{try{let e=await a.a.find().select("_id name desc photo datasetType admin created").populate("admin","_id username firstname surname created");console.log("returning datasets now......................."),o.json(e)}catch(e){return console.log("error listing datasets......................."),o.status(400).json({error:n.a.getErrorMessage(e)})}},y=async(e,o)=>{console.log("dataset ctrl update...");let t=new i.a.IncomingForm;t.keepExtensions=!0,t.parse(e,async(t,r,a)=>{if(console.log("fields",r),t)return o.status(400).json({error:"Photo could not be uploaded"});r.measures=JSON.parse(r.measures),r.calculations=JSON.parse(r.calculations),r.tags=JSON.parse(r.tags);let s=e.dataset;s=d()(s,r),s.updated=Date.now();try{console.log("trying to save...............");const e=await s.save();console.log("returning..........................."),o.json(e)}catch(t){return o.status(400).json({error:n.a.getErrorMessage(t)})}})},b=async(e,o)=>{console.log("remove dataset..............");try{let t=e.dataset,r=await t.remove();o.json(r)}catch(e){return o.status(400).json({error:n.a.getErrorMessage(e)})}},v=async(e,o)=>{console.log("createDatapoints...");let{dataset:t,user:r}=e;if(!r||!t)return o.status(400);const a=e.body;t.datapoints=[...t.datapoints,...a],t.updated=Date.now();try{console.log("trying to save");const e=await t.save();console.log("saved...");const r=a.length,s=e.datapoints.length,d=e.datapoints.slice(s-r,s);console.log("saved...newDatapoints",d),o.json(d)}catch(e){return o.status(400).json({error:n.a.getErrorMessage(e)})}},h={create:u,datasetByID:p,read:f,readMultiple:m,list:g,remove:b,update:y,createDatapoints:v};var j,G;o.a=h,(j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(j.register(u,"create","/Users/peterdomokos/projects/demo1/server/controllers/dataset.controller.js"),j.register(p,"datasetByID","/Users/peterdomokos/projects/demo1/server/controllers/dataset.controller.js"),j.register(f,"read","/Users/peterdomokos/projects/demo1/server/controllers/dataset.controller.js"),j.register(m,"readMultiple","/Users/peterdomokos/projects/demo1/server/controllers/dataset.controller.js"),j.register(g,"list","/Users/peterdomokos/projects/demo1/server/controllers/dataset.controller.js"),j.register(y,"update","/Users/peterdomokos/projects/demo1/server/controllers/dataset.controller.js"),j.register(b,"remove","/Users/peterdomokos/projects/demo1/server/controllers/dataset.controller.js"),j.register(v,"createDatapoints","/Users/peterdomokos/projects/demo1/server/controllers/dataset.controller.js"),j.register(h,"default","/Users/peterdomokos/projects/demo1/server/controllers/dataset.controller.js")),(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&G(e)}).call(this,t(1)(e))},function(e,o){e.exports=require("lodash/extend")},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new s.a.Schema({name:{type:String,trim:!0,required:"Group name is required"},initials:{type:String,trim:!0,required:"Group initials are required"},desc:String,groupType:String,photo:{data:Buffer,contentType:String},admin:[{type:s.a.Schema.ObjectId,ref:"User"}],coaches:[{type:s.a.Schema.ObjectId,ref:"User"}],players:[{type:s.a.Schema.ObjectId,ref:"User"}],datasets:[{type:s.a.Schema.ObjectId,ref:"Dataset"}],updated:Date,created:{type:Date,default:Date.now}}),n=s.a.model("Group",d);var l,i;o.a=n,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(d,"GroupSchema","/Users/peterdomokos/projects/demo1/server/models/group.model.js"),l.register(n,"default","/Users/peterdomokos/projects/demo1/server/models/group.model.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,t(1)(e))},function(e,o){e.exports=require("formidable")},function(e,o,t){"use strict";(function(e){var r,a=t(11),s=t(10),d=t.n(s),n=t(2),l=t(12),i=t.n(l),c=t(8);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const u=async(e,o)=>{console.log("createGroup");const t=new a.a(e.body);console.log("creating group",t);try{return await t.save(),console.log("success"),t.admin.forEach(e=>{Object(c.a)(e,"administeredGroups",t._id)}),o.status(200).json({message:"Successfully created group!",group:t})}catch(e){return console.log("failure",e),o.status(400).json({error:n.a.getErrorMessage(e)})}},p=async(e,o,t,r)=>{console.log("readgroupById......",r);try{let s=await a.a.findById(r).populate("admin","_id username firstname surname photo").populate("players","_id username firstname surname photo").populate("datasets","_id name desc photo");if(console.log("group",s),!s)return o.status("400").json({error:"Group not found"});e.group=s,t()}catch(e){return o.status("400").json({error:"Could not retrieve group"})}},f=(e,o)=>(console.log("read group......"),o.json(e.group)),m=async(e,o)=>{try{let e=await a.a.find().select("_id name desc photo groupType admin created").populate("admin","_id username firstname surname created");console.log("returning groups now......................."),o.json(e)}catch(e){return console.log("error listing groups......................."),o.status(400).json({error:n.a.getErrorMessage(e)})}},g=async(e,o)=>{console.log("updating group....................");let t=new i.a.IncomingForm;t.keepExtensions=!0,t.parse(e,async(t,r,a)=>{if(console.log("fields",r),t)return o.status(400).json({error:"Photo could not be uploaded"});"string"==typeof r.players&&(r.players=""===r.players?[]:r.players.split(",")),"string"==typeof r.datasets&&(r.datasets=""===r.datasets?[]:r.datasets.split(",")),console.log("fields players",r.players);let s=e.group;if(console.log("group.players",s.players),r.players){const e=r.players.filter(e=>!s.players.find(o=>o.equals(e)));console.log("nr of added players",e.length),e.forEach(e=>{Object(c.a)(e,"groupsMemberOf",s._id)});const o=s.players.filter(e=>!r.players.find(o=>o.equals(e)));console.log("nr of removed players",o.length),o.forEach(e=>{Object(c.b)(e,"groupsMemberOf",s._id)})}s=d()(s,r),s.updated=Date.now(),console.log("group now.................",s),a.photo&&(s.photo.data=fs.readFileSync(a.photo.path),s.photo.contentType=a.photo.type);try{await s.save(),o.json(s)}catch(t){return o.status(400).json({error:n.a.getErrorMessage(t)})}})},y=async(e,o)=>{console.log("remove group..............");try{let t=e.group,r=await t.remove();o.json(r)}catch(e){return o.status(400).json({error:n.a.getErrorMessage(e)})}},b={create:u,groupByID:p,read:f,list:m,remove:y,update:g};var v,h;o.a=b,(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(v.register(u,"create","/Users/peterdomokos/projects/demo1/server/controllers/group.controller.js"),v.register(p,"groupByID","/Users/peterdomokos/projects/demo1/server/controllers/group.controller.js"),v.register(f,"read","/Users/peterdomokos/projects/demo1/server/controllers/group.controller.js"),v.register(m,"list","/Users/peterdomokos/projects/demo1/server/controllers/group.controller.js"),v.register(g,"update","/Users/peterdomokos/projects/demo1/server/controllers/group.controller.js"),v.register(y,"remove","/Users/peterdomokos/projects/demo1/server/controllers/group.controller.js"),v.register(b,"default","/Users/peterdomokos/projects/demo1/server/controllers/group.controller.js")),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new s.a.Schema({datasetKey:String,statKey:String,actual:String,completion:String,date:Date,createdBy:{type:s.a.Schema.ObjectId,ref:"User"},created:{type:Date,default:Date.now},approvedBy:[{type:s.a.Schema.ObjectId,ref:"User"}],isTarget:Boolean,isExpected:Boolean});var n,l;o.a=d,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(d,"default","/Users/peterdomokos/projects/demo1/server/models/journey/stat-value.model.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a),d=t(23),n=t(52),l=t(53);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const i=new s.a.Schema({key:{type:String,trim:!0},name:{type:String,trim:!0,required:"Dataset name is required"},initials:{type:String,trim:!0,required:"Dataset initials is required"},desc:String,notes:String,photo:{data:Buffer,contentType:String},createdBy:{type:s.a.Schema.ObjectId,ref:"User"},userOwner:{type:s.a.Schema.ObjectId,ref:"User"},groupOwner:{type:s.a.Schema.ObjectId,ref:"User"},admin:[{type:s.a.Schema.ObjectId,ref:"User"}],measures:[{type:n.a}],calculations:[{type:l.a}],mainValueToDisplay:String,datapoints:[{type:d.a}],notes:{type:String,default:""},tags:[String],created:{type:Date,default:Date.now},updated:Date}),c=s.a.model("Dataset",i);var u,p;o.a=c,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(i,"DatasetSchema","/Users/peterdomokos/projects/demo1/server/models/dataset.model.js"),u.register(c,"default","/Users/peterdomokos/projects/demo1/server/models/dataset.model.js")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a),d=t(37),n=t(38),l=t(40),i=t(41),c=t(43),u=t(44),p=t(45),f=t(17);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const m=new s.a.Schema({userId:{type:s.a.Schema.ObjectId,ref:"User"},playerId:{type:s.a.Schema.ObjectId,ref:"User"},coachId:{type:s.a.Schema.ObjectId,ref:"User"},groupId:{type:s.a.Schema.ObjectId,ref:"Group"},admin:[{type:s.a.Schema.ObjectId,ref:"User"}],readOnlyAccess:[{type:s.a.Schema.ObjectId,ref:"User"}],name:String,desc:String,media:[f.a],contracts:[d.a],profiles:[n.a],aims:[l.a],goals:[i.a],links:[c.a],measures:[p.a],tags:[String],settings:[u.a],visibility:{type:String,default:"private"},updated:Date,created:{type:Date,default:Date.now}}),g=s.a.model("Journey",m);var y,b;o.a=g,(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(y.register(m,"JourneySchema","/Users/peterdomokos/projects/demo1/server/models/journey/journey.model.js"),y.register(g,"default","/Users/peterdomokos/projects/demo1/server/models/journey/journey.model.js")),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new s.a.Schema({locationKey:String,locationKeys:[String],mediaType:{type:String,default:"photo"},fileType:String,filename:String,mediaId:String,url:String,x:String,y:String,k:String});var n,l;o.a=d,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(d,"default","/Users/peterdomokos/projects/demo1/server/models/journey/media.model.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){t(6);var r,a=t(16),s=t(10),d=t.n(s),n=t(2),l=t(8);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const i=async(e,o,t,r)=>{console.log("readJourneyById......",r);try{let s=await a.a.findById(r);if(console.log("journey success"),!s)return o.status("400").json({error:"Journey not found"});e.journey=s,t()}catch(e){return o.status("400").json({error:"Could not retrieve user"})}},c=async(e,o)=>{console.log("create journey...user.................................................................",e.user._id);const t=new a.a({...e.body,userId:e.user._id,admin:[e.user._id],updated:Date.now()});try{return console.log("saving new journey"),await t.save(),console.log("success"),Object(l.a)(e.user._id,"journeys",t._id),Object(l.c)(e.user._id,"homeJourney",t._id),o.status(200).json({mesg:"Successfully signed up!",journey:t})}catch(e){return console.log("failure",e),o.status(400).json({error:n.a.getErrorMessage(e)})}},u=async(e,o)=>{console.log("updating journey.................................",e.user._id);let t=e.journey;t=d()(t,e.body),t.updated=Date.now();try{const e=await t.save();o.json(e)}catch(e){return o.status(400).json({error:n.a.getErrorMessage(e)})}},p=(e,o)=>(console.log("read journey......"),o.json(e.journey)),f=async(e,o)=>{console.log("remove journey..............");try{let t=e.journey,r=await t.remove();o.json(r)}catch(e){return o.status(400).json({error:n.a.getErrorMessage(e)})}},m={create:c,journeyByID:i,read:p,remove:f,update:u};var g,y;o.a=m,(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(g.register(i,"journeyByID","/Users/peterdomokos/projects/demo1/server/controllers/journey.controller.js"),g.register(c,"create","/Users/peterdomokos/projects/demo1/server/controllers/journey.controller.js"),g.register(u,"update","/Users/peterdomokos/projects/demo1/server/controllers/journey.controller.js"),g.register(p,"read","/Users/peterdomokos/projects/demo1/server/controllers/journey.controller.js"),g.register(f,"remove","/Users/peterdomokos/projects/demo1/server/controllers/journey.controller.js"),g.register(m,"default","/Users/peterdomokos/projects/demo1/server/controllers/journey.controller.js")),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&y(e)}).call(this,t(1)(e))},function(e,o){e.exports=require("path")},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new s.a.Schema({baseId:String,shouldInheritBaseUpdates:Boolean,title:String,startDate:{type:Date,default:Date.now},owner:{type:s.a.Schema.ObjectId,ref:"User"},admin:[{type:s.a.Schema.ObjectId,ref:"User"}],player:{type:s.a.Schema.ObjectId,ref:"User"},purpose:[String],cards:String,sections:String,frontCardId:String,isArchived:{type:Boolean,default:!1},colour:String,tags:[String],updated:Date,created:{type:Date,default:Date.now}});var n,l;o.a=d,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(d,"default","/Users/peterdomokos/projects/demo1/server/models/cards/deck.model.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a);t(21);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new s.a.Schema({id:String,desc:{type:String,default:""},completed:Boolean});var n,l;o.a=d,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(d,"default","/Users/peterdomokos/projects/demo1/server/models/journey/kpi-step.model.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(1)(e))},function(e,o){e.exports=require("fs")},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a),d=t(51);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const n=new s.a.Schema({player:{type:s.a.Schema.ObjectId,ref:"User"},players:[{type:s.a.Schema.ObjectId,ref:"User"}],createdBy:{type:s.a.Schema.ObjectId,ref:"User"},date:{type:Date,default:Date.now},created:{type:Date,default:Date.now},values:[d.a],notes:{type:String,default:""},surface:String,source:{type:String,default:"spreadsheet"},fatigueLevel:String,isTarget:{type:Boolean,default:!1},updated:Date});var l,i;o.a=n,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&l.register(n,"default","/Users/peterdomokos/projects/demo1/server/models/datapoint.model.js"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,t(1)(e))},function(e,o){e.exports=require("webpack")},function(e,o){e.exports=require("body-parser")},function(e,o,t){"use strict";(function(e){var r,a=t(5),s=t.n(a),d=t(3),n=t(4),l=t(18);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const i=s.a.Router();i.route("/api/users/:userId/journey/:journeyId").post(d.a.requireSignin,d.a.hasAuthorization,l.a.update),i.route("/api/users/:userId/journey").post(d.a.requireSignin,d.a.hasAuthorization,l.a.create),i.param("userId",n.a.userByID),i.param("journeyId",l.a.journeyByID);const c=i;var u,p;o.a=c,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(i,"router","/Users/peterdomokos/projects/demo1/server/routes/journey.routes.js"),u.register(c,"default","/Users/peterdomokos/projects/demo1/server/routes/journey.routes.js")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}).call(this,t(1)(e))},function(e,o,t){(function(e){var o;(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const r=t(19),a=t(24),s=process.cwd(),d={name:"browser",mode:"development",devtool:"eval-source-map",entry:["webpack-hot-middleware/client?reload=true",r.join(s,"client/main.js")],output:{path:r.join(s,"/dist"),filename:"bundle.js",publicPath:"/dist/"},module:{rules:[{test:/\.jsx?$/,exclude:/node_modules/,use:["babel-loader"]},{test:/\.(woff(2)?|ttf|eot|svg|gif|jpg|png)(\?[\s\S]+)?$/,use:"file-loader"},{test:/\.css$/,use:["style-loader",{loader:"css-loader",options:{modules:!1}},{loader:"postcss-loader",options:{plugin:()=>[t(63)]}}]}]},plugins:[new a.HotModuleReplacementPlugin,new a.NoEmitOnErrorsPlugin],resolve:{alias:{"react-dom":"@hot-loader/react-dom"}}};var n,l;e.exports=d,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(n.register(s,"CURRENT_WORKING_DIR","/Users/peterdomokos/projects/demo1/webpack.config.client.js"),n.register(d,"config","/Users/peterdomokos/projects/demo1/webpack.config.client.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(62)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(5),s=t.n(a),d=t(19),n=t.n(d),l=t(25),i=t.n(l),c=t(29),u=t.n(c),p=t(30),f=t.n(p),m=t(31),g=t.n(m),y=t(32),b=t.n(y),v=t(33),h=t(34),j=t(49),G=t(50),H=t(26),L=t(54),S=t(55);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const k=process.cwd(),U=s()();S.a.compile(U),U.use(s.a.static("assets")),U.use(i.a.json()),U.use(i.a.urlencoded({extended:!0})),U.use(u()()),U.use(f()()),U.use(b()({contentSecurityPolicy:!1})),U.use(g()()),U.use("/dist",s.a.static(n.a.join(k,"dist"))),U.use("/",h.a),U.use("/",j.a),U.use("/",G.a),U.use("/",H.a),U.use("/",L.a),U.use("/",H.a),U.get("*",(e,o)=>{o.status(200).send(Object(v.a)())});const w=U;var M,I;o.a=w,(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(M.register(k,"CURRENT_WORKING_DIR","/Users/peterdomokos/projects/demo1/server/express.js"),M.register(U,"app","/Users/peterdomokos/projects/demo1/server/express.js"),M.register(w,"default","/Users/peterdomokos/projects/demo1/server/express.js")),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&I(e)}).call(this,t(1)(e))},function(e,o){e.exports=require("cookie-parser")},function(e,o){e.exports=require("compression")},function(e,o){e.exports=require("cors")},function(e,o){e.exports=require("helmet")},function(e,o,t){"use strict";(function(e){var t;(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const r=()=>'<!doctype html>\n    <html lang="en">\n      <head>\n        <meta http-equiv="Content-Security-Policy" content="font-src \'self\' \'unsafe-inline\' https://fonts.gstatic.com data:; img-src \'self\' data:; style-src \'self\' \'unsafe-inline\' https://fonts.googleapis.com data:; script-src \'unsafe-eval\' \'unsafe-inline\' http://localhost:3000/dist/bundle.js \'https://switchplay-app.herokuapp.com/dist/bundle.js\' data:; default-src \'self\' localhost:*">\n        <meta name="viewport" content="minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no" charset="utf-8">\n        <meta name="apple-mobile-web-app-capable" content="yes">\n        <meta name="theme-color" content="#DBEFF0" />\n        <title>Switchplay</title>\n        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400">\n        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">\n        <link rel="stylesheet"\n            href="https://fonts.googleapis.com/css?family=B612:400,400i,700,700i|DM+Sans:400,400i,500,500i,700,700i&display=swap"\n          />\n        <style>\n            a{\n              text-decoration: none;\n              color: #061d95\n            }\n        </style>\n      </head>\n      <body>\n        <div id="root"></div>\n        <script type="text/javascript" src="/dist/bundle.js"><\/script>\n      </body>\n    </html>';var a,s;o.a=r,(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(r,"default","/Users/peterdomokos/projects/demo1/template.js"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(5),s=t.n(a),d=t(4),n=t(3);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const l=s.a.Router();l.route("/api/users/photo/:userId/:photoId").get(d.a.photo,d.a.defaultPhoto),l.route("/api/users/photo/:userId").get(d.a.photo,d.a.defaultPhoto),l.route("/api/users/defaultphoto").get(d.a.defaultPhoto),l.route("/api/users").get(d.a.list).post(d.a.create),l.route("/api/users/:userId/tables").post(d.a.createTable).put(n.a.requireSignin,n.a.hasAuthorization,d.a.updateTable),l.route("/api/users/:userId/decks/update").put(d.a.updateDecks),l.route("/api/users/:userId/decks").post(d.a.createDeck).put(n.a.requireSignin,n.a.hasAuthorization,d.a.updateDeck).delete(n.a.requireSignin,n.a.hasAuthorization,d.a.removeDeck),l.route("/api/users/:userId").get(n.a.requireSignin,d.a.read).put(n.a.requireSignin,n.a.hasAuthorization,d.a.update).delete(n.a.requireSignin,n.a.hasAuthorization,d.a.remove),l.param("userId",d.a.userByID),l.param("photoId",d.a.photoByID);const i=l;var c,u;o.a=i,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(l,"router","/Users/peterdomokos/projects/demo1/server/routes/user.routes.js"),c.register(i,"default","/Users/peterdomokos/projects/demo1/server/routes/user.routes.js")),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)}).call(this,t(1)(e))},function(e,o){e.exports=require("crypto")},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new s.a.Schema({title:String,owner:{type:s.a.Schema.ObjectId,ref:"User"},admin:[{type:s.a.Schema.ObjectId,ref:"User"}],decks:[String],archivedDecks:[String],layoutFormat:{type:String,default:"list"},isArchived:{type:Boolean,default:!1},colour:String,tags:[String],updated:Date,created:{type:Date,default:Date.now}});var n,l;o.a=d,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(d,"default","/Users/peterdomokos/projects/demo1/server/models/cards/table.model.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new s.a.Schema({id:{type:String,required:"Contract id is required"},name:String,desc:String,date:String,yPC:String,club:String,league:String,weeklyWage:String,updated:Date,created:{type:Date,default:Date.now}});var n,l;o.a=d,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(d,"default","/Users/peterdomokos/projects/demo1/server/models/journey/contract.model.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a),d=t(14),n=t(17),l=t(39);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const i=new s.a.Schema({id:{type:String,required:"Profile id is required"},title:String,desc:String,date:Date,customStartDate:Date,profileKpis:[l.a],yPC:String,photoLabel:String,media:[n.a],customTargets:[d.a],customExpected:[d.a],updated:Date,created:{type:Date,default:Date.now},createdBy:{type:s.a.Schema.ObjectId,ref:"User"}});var c,u;o.a=i,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&c.register(i,"default","/Users/peterdomokos/projects/demo1/server/models/journey/profile.model.js"),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a),d=t(21);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const n=new s.a.Schema({key:String,steps:[d.a],customStartValue:String,customMinStandard:String});var l,i;o.a=n,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&l.register(n,"default","/Users/peterdomokos/projects/demo1/server/models/journey/profile-kpi.model.js"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new s.a.Schema({id:{type:String,required:"Aim id is required"},name:String,desc:String,startDate:String,endDate:String,startYPC:String,endYPC:String,colour:String,tags:[String],updated:Date,created:{type:Date,default:Date.now}});var n,l;o.a=d,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(d,"default","/Users/peterdomokos/projects/demo1/server/models/journey/aim.model.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a),d=t(42);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const n=new s.a.Schema({id:{type:String,trim:!0,required:"goal id is required"},name:String,aimId:String,desc:String,targetDate:String,yPC:String,measures:[d.a],colour:String,tags:[String],updated:Date,created:{type:Date,default:Date.now}});var l,i;o.a=n,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&l.register(n,"default","/Users/peterdomokos/projects/demo1/server/models/journey/goal.model.js"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new s.a.Schema({measureId:String,targ:String});var n,l;o.a=d,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(d,"default","/Users/peterdomokos/projects/demo1/server/models/journey/goal-measure-info.model.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new s.a.Schema({src:{type:String,required:"source is required"},targ:{type:String,required:"target is required"}});var n,l;o.a=d,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(d,"default","/Users/peterdomokos/projects/demo1/server/models/journey/link.model.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new s.a.Schema({key:{type:String,required:"key is required"},value:{type:String,required:"value is required"}});var n,l;o.a=d,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(d,"default","/Users/peterdomokos/projects/demo1/server/models/journey/setting.model.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new s.a.Schema({id:{type:String,required:"Measure id is required"},name:String,desc:String});var n,l;o.a=d,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(d,"default","/Users/peterdomokos/projects/demo1/server/models/journey/journey-measure.model.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";o.a=t.p+"a254ae51fba808a45fa2ca029497ddb2.png"},function(e,o){e.exports=require("jsonwebtoken")},function(e,o){e.exports=require("express-jwt")},function(e,o,t){"use strict";(function(e){var r,a=t(5),s=t.n(a),d=t(13),n=t(3);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const l=s.a.Router();l.route("/api/groups").get(d.a.list).post(d.a.create),l.route("/api/groups/:groupId").get(n.a.requireSignin,d.a.read).put(n.a.requireSignin,d.a.update).delete(n.a.requireSignin,n.a.hasAuthorization,d.a.remove),l.param("groupId",d.a.groupByID);const i=l;var c,u;o.a=i,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(l,"router","/Users/peterdomokos/projects/demo1/server/routes/group.routes.js"),c.register(i,"default","/Users/peterdomokos/projects/demo1/server/routes/group.routes.js")),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(5),s=t.n(a),d=t(9),n=t(3),l=t(4);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const i=s.a.Router();i.route("/api/datasets").get(d.a.list).post(d.a.create),i.route("/api/datasets/multiple").put(d.a.readMultiple),i.route("/api/users/:userId/datasets/:datasetId/datapoints/create").put(d.a.createDatapoints),i.route("/api/datasets/:datasetId").get(n.a.requireSignin,d.a.read).put(n.a.requireSignin,d.a.update).delete(n.a.requireSignin,n.a.hasAuthorization,d.a.remove),i.param("userId",l.a.userByID),i.param("datasetId",d.a.datasetByID);const c=i;var u,p;o.a=c,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(i,"router","/Users/peterdomokos/projects/demo1/server/routes/dataset.routes.js"),u.register(c,"default","/Users/peterdomokos/projects/demo1/server/routes/dataset.routes.js")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new s.a.Schema({measure:{type:s.a.Schema.ObjectId,ref:"Measure"},key:String,value:{type:String,required:"Value is required"}});var n,l;o.a=d,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(d,"default","/Users/peterdomokos/projects/demo1/server/models/value.model.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new s.a.Schema({name:{type:String,required:"Name is required"},initials:{type:String,required:"initials are required"},key:{type:String,required:"Key is required"},nr:String,side:String,custom:String,order:{type:String,default:"highest is best"},unit:String,dataType:{type:String,default:"number"},formula:String,notes:String,hidden:{type:Boolean,default:!1},isMain:{type:Boolean,default:!1},createdBy:{type:s.a.Schema.ObjectId,ref:"User"}});var n,l;o.a=d,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(d,"default","/Users/peterdomokos/projects/demo1/server/models/dataset-measure.model.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(0),s=t.n(a);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new s.a.Schema({name:{type:String,required:"Name is required"},initials:{type:String,required:"initials are required"},key:{type:String,required:"Key is required"},dataType:{type:String,default:"number"},formula:String,unit:String,isMain:Boolean,createdBy:{type:s.a.Schema.ObjectId,ref:"User"}});var n,l;o.a=d,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(d,"default","/Users/peterdomokos/projects/demo1/server/models/calculation.model.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(5),s=t.n(a),d=t(3);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const n=s.a.Router();n.route("/auth/signin").post(d.a.signin),n.route("/auth/signout").get(d.a.signout);const l=n;var i,c;o.a=l,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(n,"router","/Users/peterdomokos/projects/demo1/server/routes/auth.routes.js"),i.register(l,"default","/Users/peterdomokos/projects/demo1/server/routes/auth.routes.js")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var r,a=t(7),s=t(24),d=t.n(s),n=t(56),l=t.n(n),i=t(57),c=t.n(i),u=t(27),p=t.n(u);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const f=e=>{if("development"===a.a.env){const o=d()(p.a),t=l()(o,{publicPath:p.a.output.publicPath});e.use(t),e.use(c()(o))}},m={compile:f};var g,y;o.a=m,(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(g.register(f,"compile","/Users/peterdomokos/projects/demo1/server/devBundle.js"),g.register(m,"default","/Users/peterdomokos/projects/demo1/server/devBundle.js")),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&y(e)}).call(this,t(1)(e))},function(e,o){e.exports=require("webpack-dev-middleware")},function(e,o){e.exports=require("webpack-hot-middleware")},function(e,o,t){e.exports=t(59)},function(e,o,t){"use strict";t.r(o);var r=t(7),a=t(28),s=t(0),d=t.n(s);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;d.a.Promise=global.Promise,d.a.connect(r.a.mongoUri,{useNewUrlParser:!0,useCreateIndex:!0,useUnifiedTopology:!0}),a.a.listen(r.a.port,e=>{e&&console.log(e),console.info("Server started on port %s.",r.a.port)})},function(e,o){e.exports=require("lodash")},function(e,o){e.exports=require("d3")},function(e,o){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,o){e.exports=require("autoprefixer")}]);